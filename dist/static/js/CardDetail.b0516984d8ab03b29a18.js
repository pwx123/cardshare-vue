webpackJsonp([13],{"5gTp":function(s,e){},aFA8:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("Dd8w"),i=t.n(a),r=t("NYxO"),d=t("hhm8"),l=t("mtWM"),c=t.n(l),o=t("qwAB"),n=t("8l5Z"),v={components:{scroll:o.a,modal:n.a},data:function(){return{scrollY:0,isEdit:!1,editcard:{},slide:"slide",color:"#"+this.$route.query.color,canremove:!1,modalshare:!1,msg:"",mdShow:!1}},computed:i()({},Object(r.b)(["card"]),{userNameCharAt:function(){if(this.card)return this.card.userName.charAt(0)}}),watch:{scrollY:function(s){if(-s<200&&s<0?(this.$refs.header.style.height="250px",this.$refs.header.style.zIndex=0,this.$refs.header.style.transform="scale(1)",this.$refs.layer.style.transform="translate3d(0,"+s+"px,0)",this.$refs.picname.style.transform="translate3d("+s/40*9+"px,"+s+"px,0)"):s<0&&(this.$refs.header.style.height="50px",this.$refs.header.style.zIndex=10,this.$refs.layer.style.transform="translate3d(0,-190px,0)",this.$refs.picname.style.transform="translate3d(-40px,-190px,0)"),s>0){var e=(250+s)/250;this.$refs.header.style.zIndex=10,this.$refs.header.style.transform="scale("+e+")",this.$refs.layer.style.transform="translate3d(0,0,0)",this.$refs.picname.style.transform="translate3d(0,0,0)"}}},mounted:function(){this._getStart()},created:function(){this.listenScroll=!0,this.probetype=3},methods:i()({scroll:function(s){this.scrollY=s.y},editOrcancel:function(){this.isEdit?this.isEdit=!1:(this.editcard.key=this.card.key,this.editcard.cardid=this.card.cardid,this.editcard.userName=this.card.userName,this.editcard.phoneNum=this.card.phoneNum,this.editcard.email=this.card.email,this.editcard.address=this.card.address,this.isEdit=!0)},cencel:function(){this.canremove=!1},share:function(){this.modalshare=!0},closeShare:function(){this.modalshare=!1},remove:function(){var s=this;c.a.post("/users/removeCard",{loginUserEmail:this.$cookie.get("loginUserEmail"),cardId:this.card.cardid}).then(function(e){"0"===e.data.status?(s.setReFresh(!0),s.$router.push({path:"/CardList"})):console.log(e.data)})},removeOrsave:function(){var s=this;if(this.isEdit){if(!Object(d.f)(this.editcard.userName))return this.msg="姓名不能为空",void(this.mdShow=!0);if(!Object(d.d)(this.editcard.phoneNum))return this.msg="手机号码不符合规范",void(this.mdShow=!0);if(!Object(d.a)(this.editcard.email))return this.msg="邮箱不符合规范",void(this.mdShow=!0);c.a.post("/users/editCard",{loginUserEmail:this.$cookie.get("loginUserEmail"),card:this.editcard}).then(function(e){"0"===e.data.status?(s.setReFresh(!0),s.isEdit=!1,s.setCard(s.editcard)):console.log(e.data)})}else this.canremove=!0},_getStart:function(){var s=this;this.card.userName?setTimeout(function(){s.$refs.scrolldetailul.style.height=s.$refs.scrolldetail.$el.offsetHeight+250-50+"px"},20):this.$router.push("/CardList")},closeMd:function(){this.mdShow=!1}},Object(r.c)({setCard:"SET_CARD_MUTATION",setReFresh:"SET_REFRESH_MUTATION"}))},h={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("transition",{attrs:{name:"slide"}},[t("div",{staticClass:"carddetail"},[t("div",{ref:"header",staticClass:"header",style:{backgroundColor:s.color}},[t("div",{ref:"picname",staticClass:"picname"},[t("div",{staticClass:"pic",style:{backgroundColor:s.color}},[s._v(s._s(s.userNameCharAt))]),s._v(" "),t("div",{staticClass:"userName"},[s._v(s._s(s.card.userName))])])]),s._v(" "),t("div",{ref:"layer",staticClass:"bg-layer"}),s._v(" "),t("scroll",{ref:"scrolldetail",staticClass:"scrolldetail",attrs:{"listen-scroll":s.listenScroll,"probe-type":s.probetype},on:{scroll:s.scroll}},[t("ul",{ref:"scrolldetailul",staticClass:"scrolldetailul"},[t("li",{staticClass:"detail-list"},[t("div",{staticClass:"name"},[s._v("姓名")]),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!s.isEdit,expression:"!isEdit"}],staticClass:"value"},[s._v(s._s(s.card.userName))]),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:s.isEdit,expression:"isEdit"}]},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.editcard.userName,expression:"editcard.userName"}],staticClass:"edit-input",attrs:{type:"text"},domProps:{value:s.editcard.userName},on:{input:function(e){e.target.composing||s.$set(s.editcard,"userName",e.target.value)}}})])]),s._v(" "),t("li",{staticClass:"detail-list"},[t("div",{staticClass:"name"},[s._v("电话")]),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!s.isEdit,expression:"!isEdit"}],staticClass:"value"},[t("a",{attrs:{href:"tel:"+s.card.phoneNum}},[s._v(s._s(s.card.phoneNum)+"\n              "),t("i",{staticClass:"icon iconfont icon-jisuanqi"})])]),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:s.isEdit,expression:"isEdit"}]},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.editcard.phoneNum,expression:"editcard.phoneNum"}],staticClass:"edit-input",attrs:{type:"text"},domProps:{value:s.editcard.phoneNum},on:{input:function(e){e.target.composing||s.$set(s.editcard,"phoneNum",e.target.value)}}})])]),s._v(" "),t("li",{staticClass:"detail-list"},[t("div",{staticClass:"name"},[s._v("邮箱")]),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!s.isEdit,expression:"!isEdit"}],staticClass:"value"},[t("a",{attrs:{href:"mailto:"+s.card.email}},[s._v(s._s(s.card.email)+"\n              "),t("i",{staticClass:"icon iconfont icon-youjianduanxin"})])]),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:s.isEdit,expression:"isEdit"}]},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.editcard.email,expression:"editcard.email"}],staticClass:"edit-input",attrs:{type:"text"},domProps:{value:s.editcard.email},on:{input:function(e){e.target.composing||s.$set(s.editcard,"email",e.target.value)}}})])]),s._v(" "),t("li",{staticClass:"detail-list"},[t("div",{staticClass:"name"},[s._v("地址")]),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!s.isEdit,expression:"!isEdit"}],staticClass:"value"},[t("router-link",{attrs:{to:{path:"/Map",query:{address:s.card.address}}}},[s._v(s._s(s.card.address)+"\n              "),t("i",{staticClass:"icon iconfont icon-dingwei"})])],1),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:s.isEdit,expression:"isEdit"}]},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.editcard.address,expression:"editcard.address"}],staticClass:"edit-input",attrs:{type:"text"},domProps:{value:s.editcard.address},on:{input:function(e){e.target.composing||s.$set(s.editcard,"address",e.target.value)}}})])]),s._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:"self"!=s.card.cardid,expression:"card.cardid=='self'?false:true"}],staticClass:"li-btn"},[t("span",{staticClass:"edit",on:{click:s.editOrcancel}},[s._v(s._s(s.isEdit?"取消":"编辑"))]),s._v(" "),t("span",{staticClass:"delete",on:{click:s.removeOrsave}},[s._v(s._s(s.isEdit?"保存":"删除"))])]),s._v(" "),t("li",{staticClass:"li-btn"},[t("span",{staticClass:"share",on:{click:s.share}},[s._v("分享")])])])]),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:s.canremove,expression:"canremove"}],staticClass:"modalbg"},[t("div",{staticClass:"modal"},[t("div",{staticClass:"title"},[s._v("确定要删除吗")]),s._v(" "),t("div",{staticClass:"btns"},[t("div",{staticClass:"btn btncancel",on:{click:s.cencel}},[s._v("取消")]),s._v(" "),t("div",{staticClass:"btn btnsave",on:{click:s.remove}},[s._v("确定")])])])]),s._v(" "),t("modal",{attrs:{msg:s.msg,"md-show":s.mdShow},on:{closeMd:s.closeMd}}),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:s.modalshare,expression:"modalshare"}],staticClass:"modalshare"},[t("div",{staticClass:"shareContainer"},[t("div",{staticClass:"shareItem shareItem-QQ"},[t("i",{staticClass:"icon iconfont icon-QQ"}),s._v(" "),t("span",[s._v("分享到QQ")])]),s._v(" "),t("div",{staticClass:"shareItem shareItem-weixin"},[t("i",{staticClass:"icon iconfont icon-weixin"}),s._v(" "),t("span",[s._v("分享到微信")])]),s._v(" "),t("div",{staticClass:"shareItem"},[t("span",[t("router-link",{attrs:{to:"/Send"}},[s._v("面对面分享")])],1)]),s._v(" "),t("div",{staticClass:"shareItem"},[t("span",[s._v("更多...")])]),s._v(" "),t("div",{staticClass:"shareItem shareItem-cancel"},[t("span",{on:{click:s.closeShare}},[s._v("取消")])])])])],1)])},staticRenderFns:[]};var m=t("VU/8")(v,h,!1,function(s){t("5gTp")},"data-v-46dd6f72",null);e.default=m.exports}});
//# sourceMappingURL=CardDetail.b0516984d8ab03b29a18.js.map
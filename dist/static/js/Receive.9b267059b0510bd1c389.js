webpackJsonp([14],{"0wy+":function(s,t){},"7NC/":function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("Dd8w"),i=e.n(a),o=e("mtWM"),c=e.n(o),n=e("hhm8"),r=e("NYxO"),d={components:{modal:e("8l5Z").a},data:function(){return{user:"",senduser:"",locity:"",card:{},recmodal:!1,shareId:"",modalmsg:"",mdShow:!1,msg:{userName:"姓名",phoneNum:"电话",email:"邮箱",address:"地址"}}},mounted:function(){this.$cookie.get("loginUserEmail")?this.startCon():this.$router.push({path:"/CardList"})},methods:i()({startCon:function(){this.user=this.$cookie.get("loginUserEmail")},receive:function(){var s=this;this.card.cardid=Object(n.b)(this.user),c.a.post("/users/addCard",{loginUserEmail:this.$cookie.get("loginUserEmail"),card:this.card}).then(function(t){"0"===t.data.status?(s.setReFresh(!0),s.$router.push({path:"/CardList"})):console.log(t.data)})},cancel:function(){this.recmodal=!1},startReceive:function(){0===this.shareId.trim().length?(this.modalmsg="请输入正确的分享码",this.mdShow=!0):(this.$socket.open(),this.$socket.emit("startReceive",{shareId:this.shareId}))},closeMd:function(){this.mdShow=!1},close:function(){this.$router.push({path:"/CardList"})}},Object(r.c)({setReFresh:"SET_REFRESH_MUTATION"})),sockets:{connect:function(){console.log("socket connected")},receiveCard:function(s){this.senduser=s.senduser,this.card=s.card,this.recmodal=!0},over:function(s){console.log(s)},err:function(s){this.modalmsg="分享码不正确",this.mdShow=!0}},beforeRouteLeave:function(s,t,e){this.$socket.close(),e()}},l={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("transition",{attrs:{name:"slide"}},[e("div",{staticClass:"receive"},[e("div",{staticClass:"msg"},[s._v("输入数字或扫描二维码完成接受")]),s._v(" "),e("div",{staticClass:"recInput"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.shareId,expression:"shareId"}],attrs:{type:"text"},domProps:{value:s.shareId},on:{input:function(t){t.target.composing||(s.shareId=t.target.value)}}}),s._v(" "),e("span",{staticClass:"btn",on:{click:s.startReceive}},[s._v("确定")])]),s._v(" "),e("div",{staticClass:"recQR"},[e("span",[s._v("扫一扫")]),s._v(" "),e("i",{staticClass:"icon iconfont icon-scan"})]),s._v(" "),e("div",{staticClass:"close",on:{click:s.close}},[s._v("取消")]),s._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:s.recmodal,expression:"recmodal"}],staticClass:"recmodal"},[e("div",{staticClass:"title"},[s._v("接收到来自"+s._s(s.senduser)+"的名片")]),s._v(" "),s._l(s.msg,function(t,a){return e("ul",{key:a,staticClass:"msg"},[e("li",[s._v(s._s(t)+":"+s._s(s.card[a]))])])}),s._v(" "),e("div",{staticClass:"btns"},[e("div",{staticClass:"btn btnsave",on:{click:s.receive}},[s._v("接受")]),s._v(" "),e("div",{staticClass:"btn btncancel",on:{click:s.cancel}},[s._v("取消")])])],2),s._v(" "),e("modal",{attrs:{msg:s.modalmsg,"md-show":s.mdShow},on:{closeMd:s.closeMd}})],1)])},staticRenderFns:[]};var h=e("VU/8")(d,l,!1,function(s){e("0wy+")},"data-v-0d4a779c",null);t.default=h.exports}});
//# sourceMappingURL=Receive.9b267059b0510bd1c389.js.map
{"version":3,"sources":["webpack:///src/components/Receive/Receive.vue","webpack:///./src/components/Receive/Receive.vue?9001","webpack:///./src/components/Receive/Receive.vue"],"names":["modal","startCon","methods","extends_default","_this","this","user","axios_default","a","post","card","then","res","data","open","shareId","senduser","value","close","next","Receive_Receive","render","_vm","_h","$createElement","_c","_self","attrs","name","staticClass","_v","directives","rawName","expression","type","domProps","on","input","$event","target","composing","click","startReceive","_s","_l","key","receive","cancel","msg","modalmsg","md-show","mdShow","closeMd","staticRenderFns","Component","__webpack_require__","normalizeComponent","Receive","ssrContext","__webpack_exports__"],"mappings":"oNAgEAA,gBAAA,+BAGA,YACA,UACA,qBAEA,UACA,YACA,WACA,gBAEA,cACA,WACA,aAGA,mEAMAC,mCAFA,eAKAC,QAAAC,oDAEA,sCAEA,IAAAC,EAAAC,uCACAC,MACAC,EAAAC,EAAAC,KAAA,kDAEA,4BAEAC,OAHAC,KAAA,SAAAC,8DAOA,6BAEAC,0CAKA,yEAIA,yBACA,iBAEAC,sDAGAC,4CAIA,4CAGA,wCAKA,kEAGA,6DAGAC,qBACAN,oBACA,gCAGAO,kCAGA,sBACA,kDAIAC,QACAC,MCtJAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAjB,KAAakB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,cAAwBE,OAAOC,KAAA,WAAgBH,EAAA,OAAYI,YAAA,YAAsBJ,EAAA,OAAYI,YAAA,QAAkBP,EAAAQ,GAAA,oBAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAAmDI,YAAA,aAAuBJ,EAAA,SAAcM,aAAaH,KAAA,QAAAI,QAAA,UAAAf,MAAAK,EAAA,QAAAW,WAAA,YAAwEN,OAASO,KAAA,QAAcC,UAAWlB,MAAAK,EAAA,SAAsBc,IAAKC,MAAA,SAAAC,GAAyBA,EAAAC,OAAAC,YAAsClB,EAAAP,QAAAuB,EAAAC,OAAAtB,WAAkCK,EAAAQ,GAAA,KAAAL,EAAA,QAAyBI,YAAA,MAAAO,IAAsBK,MAAAnB,EAAAoB,gBAA0BpB,EAAAQ,GAAA,UAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAAyCI,YAAA,UAAoBJ,EAAA,QAAAH,EAAAQ,GAAA,SAAAR,EAAAQ,GAAA,KAAAL,EAAA,KAAiDI,YAAA,8BAAsCP,EAAAQ,GAAA,KAAAL,EAAA,OAA0BI,YAAA,QAAAO,IAAwBK,MAAAnB,EAAAJ,SAAmBI,EAAAQ,GAAA,QAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAAuCM,aAAaH,KAAA,OAAAI,QAAA,SAAAf,MAAAK,EAAA,SAAAW,WAAA,aAAwEJ,YAAA,aAAyBJ,EAAA,OAAYI,YAAA,UAAoBP,EAAAQ,GAAA,QAAAR,EAAAqB,GAAArB,EAAAN,UAAA,SAAAM,EAAAQ,GAAA,KAAAR,EAAAsB,GAAAtB,EAAA,aAAAL,EAAA4B,GAAgG,OAAApB,EAAA,MAAgBoB,MAAAhB,YAAA,QAA0BJ,EAAA,MAAAH,EAAAQ,GAAAR,EAAAqB,GAAA1B,GAAA,IAAAK,EAAAqB,GAAArB,EAAAZ,KAAAmC,WAA+DvB,EAAAQ,GAAA,KAAAL,EAAA,OAAwBI,YAAA,SAAmBJ,EAAA,OAAYI,YAAA,cAAAO,IAA8BK,MAAAnB,EAAAwB,WAAqBxB,EAAAQ,GAAA,QAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAAuCI,YAAA,gBAAAO,IAAgCK,MAAAnB,EAAAyB,UAAoBzB,EAAAQ,GAAA,cAAAR,EAAAQ,GAAA,KAAAL,EAAA,SAA+CE,OAAOqB,IAAA1B,EAAA2B,SAAAC,UAAA5B,EAAA6B,QAAwCf,IAAKgB,QAAA9B,EAAA8B,YAAuB,MAEj+CC,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAC,EACArC,GATA,EAVA,SAAAsC,GACAH,EAAA,SAaA,kBAEA,MAUAI,EAAA,QAAAL,EAAA","file":"static/js/Receive.9b267059b0510bd1c389.js","sourcesContent":["<template>\r\n  <transition name=\"slide\">\r\n    <div class=\"receive\">\r\n      <div class=\"msg\">输入数字或扫描二维码完成接受</div>\r\n      <div class=\"recInput\">\r\n        <input\r\n          v-model=\"shareId\"\r\n          type=\"text\"\r\n        >\r\n          <span\r\n            class=\"btn\"\r\n            @click=\"startReceive\"\r\n          >确定</span>\r\n      </div>\r\n      <div class=\"recQR\">\r\n        <span>扫一扫</span>\r\n        <i class=\"icon iconfont icon-scan\" />\r\n      </div>\r\n      <div\r\n        class=\"close\"\r\n        @click=\"close\"\r\n      >取消</div>\r\n    <div\r\n      v-show=\"recmodal\"\r\n      class=\"recmodal\"\r\n    >\r\n      <div class=\"title\">接收到来自{{ senduser }}的名片</div>\r\n      <ul\r\n        v-for=\"(value,key) in msg\"\r\n        :key=\"key\"\r\n        class=\"msg\"\r\n      >\r\n        <li>{{ value }}:{{ card[key] }}</li>\r\n        </ul>\r\n        <div class=\"btns\">\r\n          <div\r\n            class=\"btn btnsave\"\r\n            @click=\"receive\"\r\n          >接受</div>\r\n        <div\r\n          class=\"btn btncancel\"\r\n          @click=\"cancel\"\r\n        >取消</div>\r\n          </div>\r\n          </div>\r\n          <modal\r\n            :msg=\"modalmsg\"\r\n            :md-show=\"mdShow\"\r\n            @closeMd=\"closeMd\"\r\n          />\r\n          </div>\r\n  </transition>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { getCardId } from \"common/js/util\";\r\nimport { mapMutations } from \"vuex\";\r\nimport modal from \"base/modal/modal\";\r\n\r\nexport default {\r\n  components: {\r\n    modal\r\n  },\r\n  data() {\r\n    return {\r\n      user: \"\",\r\n      senduser: \"\",\r\n      locity: \"\",\r\n      card: {},\r\n      recmodal: false,\r\n      shareId: \"\",\r\n      modalmsg: \"\",\r\n      mdShow: false,\r\n      msg: {\r\n        userName: \"姓名\",\r\n        phoneNum: \"电话\",\r\n        email: \"邮箱\",\r\n        address: \"地址\"\r\n      }\r\n    };\r\n  },\r\n  mounted() {\r\n    if (!this.$cookie.get(\"loginUserEmail\")) {\r\n      this.$router.push({ path: \"/CardList\" });\r\n    } else {\r\n      this.startCon();\r\n    }\r\n  },\r\n  methods: {\r\n    startCon() {\r\n      this.user = this.$cookie.get(\"loginUserEmail\");\r\n    },\r\n    receive() {\r\n      this.card.cardid = getCardId(this.user);\r\n      axios\r\n        .post(\"/users/addCard\", {\r\n          loginUserEmail: this.$cookie.get(\"loginUserEmail\"),\r\n          card: this.card\r\n        })\r\n        .then(res => {\r\n          if (res.data.status === \"0\") {\r\n            this.setReFresh(true); // 重新加载CardList\r\n            this.$router.push({ path: \"/CardList\" });\r\n          } else {\r\n            console.log(res.data);\r\n          }\r\n        });\r\n    },\r\n    cancel() {\r\n      this.recmodal = false;\r\n    },\r\n    startReceive() {\r\n      if (this.shareId.trim().length === 0) {\r\n        this.modalmsg = \"请输入正确的分享码\";\r\n        this.mdShow = true;\r\n      } else {\r\n        this.$socket.open();\r\n        this.$socket.emit(\"startReceive\", {\r\n          shareId: this.shareId\r\n        });\r\n      }\r\n    },\r\n    closeMd() {\r\n      this.mdShow = false;\r\n    },\r\n    close() {\r\n      this.$router.push({ path: \"/CardList\" });\r\n    },\r\n    ...mapMutations({\r\n      setReFresh: \"SET_REFRESH_MUTATION\"\r\n    })\r\n  },\r\n  sockets: {\r\n    connect() {\r\n      console.log(\"socket connected\");\r\n    },\r\n    receiveCard(value) {\r\n      this.senduser = value.senduser;\r\n      this.card = value.card;\r\n      this.recmodal = true;\r\n    },\r\n    over(value) {\r\n      console.log(value);\r\n    },\r\n    err(value) {\r\n      this.modalmsg = \"分享码不正确\";\r\n      this.mdShow = true;\r\n    }\r\n  },\r\n  beforeRouteLeave(to, from, next) {\r\n    this.$socket.close();\r\n    next();\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n@import '~common/stylus/variable'\r\n\r\n.receive\r\n  position fixed\r\n  top 0\r\n  bottom 0\r\n  left 0\r\n  right 0\r\n  background-color #eee\r\n  z-index 60\r\n\r\n  .msg\r\n    text-align center\r\n    margin 100px 0px 30px 0px\r\n\r\n  .recInput\r\n    text-align center\r\n    width 90%\r\n    margin 0 auto\r\n    border-bottom 1px solid #999\r\n    padding-bottom 20px\r\n\r\n    input\r\n      width 120px\r\n      height 40px\r\n      border-radius 6px\r\n      box-sizing border-box\r\n      outline 0\r\n      border 1px solid #bfcbd9\r\n      padding 0 15px\r\n      transition 0.5s border-color\r\n      appearance none\r\n\r\n      &:focus\r\n        border-color #20a0ff\r\n\r\n    .btn\r\n      display inline-block\r\n      color #fff\r\n      width 80px\r\n      border-radius 5px\r\n      height 35px\r\n      margin-left 40px\r\n      line-height 35px\r\n      text-align center\r\n      background-color $color-theme\r\n\r\n  .recQR\r\n    width 140px\r\n    height 40px\r\n    line-height 40px\r\n    margin 0 auto\r\n    text-align center\r\n    border-radius 5px\r\n    color #fff\r\n    margin-top 40px\r\n    font-size 20px\r\n    background-color $color-theme\r\n\r\n    i\r\n      font-size 20px\r\n\r\n  .close\r\n    width 140px\r\n    height 40px\r\n    line-height 40px\r\n    text-align center\r\n    margin 0 auto\r\n    margin-top 70px\r\n    color #fff\r\n    background-color #ec4c5d\r\n    border-radius 5px\r\n    transition all 0.5s\r\n\r\n  .recmodal\r\n    position absolute\r\n    top 50%\r\n    left 50%\r\n    width 80%\r\n    height 270px\r\n    transform translate(-50%, -50%)\r\n    background-color #fff\r\n    border-radius 6px\r\n    border 1px solid $color-theme\r\n    animation comein 0.5s\r\n\r\n    .title\r\n      text-align center\r\n      margin 10px\r\n      padding-bottom 10px\r\n      border-bottom 1px solid #999\r\n\r\n    .msg\r\n      margin 0 20px\r\n\r\n      li\r\n        height 40px\r\n        line-height 40px\r\n        border-bottom 1px solid #eee\r\n        padding 0 10px\r\n\r\n        &:first-child\r\n          border-top 1px solid #eee\r\n\r\n    .btns\r\n      display flex\r\n      justify-content space-around\r\n      margin 10px 0px\r\n\r\n      .btn\r\n        width 60px\r\n        height 30px\r\n        font-size 18px\r\n        color #fff\r\n        line-height 30px\r\n        border-radius 5px\r\n        text-align center\r\n        margin 0 auto\r\n        float left\r\n        background-color $color-theme\r\n\r\n      .btncancel\r\n        background-color #ec4c5d\r\n\r\n@keyframes comein\r\n  from\r\n    opacity 0.3\r\n\r\n  to\r\n    opacity 1\r\n\r\n.slide-enter-active, .slide-leave-active\r\n  transition all 0.3s\r\n\r\n.slide-enter, .slide-leave-to\r\n  opacity 0\r\n  transform translate3d(100%, 0, 0)\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Receive/Receive.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide\"}},[_c('div',{staticClass:\"receive\"},[_c('div',{staticClass:\"msg\"},[_vm._v(\"输入数字或扫描二维码完成接受\")]),_vm._v(\" \"),_c('div',{staticClass:\"recInput\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shareId),expression:\"shareId\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.shareId)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.shareId=$event.target.value}}}),_vm._v(\" \"),_c('span',{staticClass:\"btn\",on:{\"click\":_vm.startReceive}},[_vm._v(\"确定\")])]),_vm._v(\" \"),_c('div',{staticClass:\"recQR\"},[_c('span',[_vm._v(\"扫一扫\")]),_vm._v(\" \"),_c('i',{staticClass:\"icon iconfont icon-scan\"})]),_vm._v(\" \"),_c('div',{staticClass:\"close\",on:{\"click\":_vm.close}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.recmodal),expression:\"recmodal\"}],staticClass:\"recmodal\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"接收到来自\"+_vm._s(_vm.senduser)+\"的名片\")]),_vm._v(\" \"),_vm._l((_vm.msg),function(value,key){return _c('ul',{key:key,staticClass:\"msg\"},[_c('li',[_vm._v(_vm._s(value)+\":\"+_vm._s(_vm.card[key]))])])}),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[_c('div',{staticClass:\"btn btnsave\",on:{\"click\":_vm.receive}},[_vm._v(\"接受\")]),_vm._v(\" \"),_c('div',{staticClass:\"btn btncancel\",on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])])],2),_vm._v(\" \"),_c('modal',{attrs:{\"msg\":_vm.modalmsg,\"md-show\":_vm.mdShow},on:{\"closeMd\":_vm.closeMd}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0d4a779c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Receive/Receive.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0d4a779c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Receive.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Receive.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Receive.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0d4a779c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Receive.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0d4a779c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Receive/Receive.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}